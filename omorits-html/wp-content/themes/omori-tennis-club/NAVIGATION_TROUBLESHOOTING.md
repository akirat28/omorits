# ナビゲーション表示トラブルシューティングガイド

## 📋 問題の解決

左側ナビゲーションが表示されない問題を修正しました。

### ✅ 修正内容
- **index.php** を左側ナビゲーション付きテンプレートに更新

## 🎯 WordPressテンプレート階層

WordPressは以下の優先順位でテンプレートを選択します：

### ページタイプ別のテンプレート適用

| ページタイプ | 使用されるテンプレート | ナビゲーション |
|------------|-------------------|--------------|
| **HOMEページ** | `page-home.php` | なし（フルスクリーン） |
| **固定ページ** | `page.php` → `index.php` | 左側にあり |
| **個別投稿** | `single.php` → `index.php` | 左側にあり |
| **カテゴリー** | `archive.php` → `index.php` | 左側にあり |
| **タグ** | `archive.php` → `index.php` | 左側にあり |
| **月別アーカイブ** | `archive.php` → `index.php` | 左側にあり |
| **検索結果** | `search.php` → `index.php` | 左側にあり |
| **404ページ** | `404.php` → `index.php` | 左側にあり |

## 🔍 確認方法

### 1. どのテンプレートが使用されているか確認

functions.php に以下のコードを一時的に追加して確認：

```php
// デバッグ用（確認後は削除してください）
add_action('wp_head', function() {
    if (current_user_can('administrator')) {
        global $template;
        echo '<!-- テンプレート: ' . basename($template) . ' -->';
    }
});
```

ページのソースコードを表示すると、HTMLコメントで使用中のテンプレートが確認できます。

### 2. キャッシュをクリア

#### ブラウザキャッシュ
- **Chrome/Edge**: Ctrl + Shift + R (Windows) / Cmd + Shift + R (Mac)
- **Firefox**: Ctrl + F5
- **Safari**: Cmd + Option + R

#### WordPressキャッシュ
キャッシュプラグインを使用している場合：
1. プラグインの設定画面へ
2. 「キャッシュをクリア」または「パージ」をクリック

### 3. テーマが有効化されているか確認

1. WordPress管理画面 → 「外観」→「テーマ」
2. 「大森テニスクラブ」が有効化されていることを確認

## 🛠️ よくある問題と解決策

### Q: 固定ページにナビゲーションが表示されない
**A:** 以下を確認：
1. ページテンプレートが「HOMEページ」に設定されていないか確認
   - ページ編集画面の右側「ページ属性」→「テンプレート」
   - 「デフォルトテンプレート」を選択
2. page.php が存在するか確認
3. index.php が更新されているか確認

### Q: 投稿ページにナビゲーションが表示されない
**A:** 以下を確認：
1. single.php が存在するか確認
2. index.php が更新されているか確認

### Q: ナビゲーションメニューが空
**A:** 以下を設定：
1. 「外観」→「メニュー」
2. 新しいメニューを作成
3. 「メニュー設定」で「プライマリーメニュー」にチェック
4. メニューを保存

### Q: スタイルが適用されない
**A:** 以下を確認：
1. style.css に左側ナビゲーション用スタイル（1271行目以降）が存在
2. ブラウザの開発者ツール（F12）でCSSエラーを確認
3. キャッシュをクリア

## 📁 ファイル構成確認

以下のファイルが存在することを確認：

```
wp-content/themes/omori-tennis-club/
├── index.php          ✅ 更新済み（フォールバックテンプレート）
├── page.php           ✅ 作成済み（固定ページ用）
├── page-home.php      ✅ 作成済み（HOMEページ専用）
├── single.php         ✅ 作成済み（投稿用）
├── archive.php        ✅ 作成済み（アーカイブ用）
├── header.php         ✅ 更新済み
├── footer.php         ✅ 作成済み
├── functions.php      ✅ 更新済み
└── style.css          ✅ 更新済み（ナビゲーションスタイル追加）
```

## 💡 開発者向け情報

### テンプレートの選択ロジック

```
1. 特定のテンプレートを探す（page-{slug}.php, single.php等）
2. 一般的なテンプレートを探す（page.php, archive.php等）
3. index.php にフォールバック
```

### ナビゲーション非表示の条件

HOMEページ（page-home.php）のみナビゲーションなし：
- フロントページとして設定された場合
- ページテンプレート「HOMEページ」が選択された場合

### カスタマイズポイント

左側ナビゲーションをカスタマイズする場合：
1. **メニュー項目**: functions.php の `register_nav_menus`
2. **ウィジェット**: サイドバーウィジェットエリアを追加
3. **スタイル**: style.css の1271行目以降

## 📝 テスト手順

1. **HOMEページ**: ナビゲーションなし ✓
2. **会社概要ページ**: 左側ナビゲーションあり ✓
3. **お知らせ一覧**: 左側ナビゲーションあり ✓
4. **個別記事**: 左側ナビゲーションあり ✓
5. **カテゴリーページ**: 左側ナビゲーションあり ✓

## 🆘 それでも解決しない場合

1. **エラーログを確認**
   ```php
   // wp-config.php に追加
   define('WP_DEBUG', true);
   define('WP_DEBUG_LOG', true);
   define('WP_DEBUG_DISPLAY', false);
   ```

2. **プラグインの競合を確認**
   - すべてのプラグインを無効化
   - 1つずつ有効化して問題を特定

3. **PHPバージョンを確認**
   - PHP 7.0以上が必要

---
更新日: 2024年
大森テニスクラブテーマ トラブルシューティング